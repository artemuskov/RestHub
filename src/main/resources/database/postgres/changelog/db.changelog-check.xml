<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet author="meow" id="dropCheckWeightConstraintIfExists">
        <sql>
            ALTER TABLE rh.dish DROP CONSTRAINT IF EXISTS weightChecker
        </sql>
    </changeSet>
    <changeSet author="meow" id="addCheckWeightConstraint">
        <sql>
            ALTER TABLE rh.dish ADD CONSTRAINT weightChecker
            CHECK (CAST(weight AS INT) > 0)
        </sql>
    </changeSet>

    <changeSet author="meow" id="dropCheckCaloriesConstraintIfExists">
        <sql>
            ALTER TABLE rh.dish DROP CONSTRAINT IF EXISTS caloriesChecker
        </sql>
    </changeSet>
    <changeSet author="meow" id="addCheckCaloriesConstraint">
        <sql>
            ALTER TABLE rh.dish ADD CONSTRAINT caloriesChecker
            CHECK (CAST(calories AS INT) > 0)
        </sql>
    </changeSet>

    <changeSet author="meow" id="dropCheckPreparingTimeConstraintIfExists">
        <sql>
            ALTER TABLE rh.dish DROP CONSTRAINT IF EXISTS preparingTimeChecker
        </sql>
    </changeSet>
    <changeSet author="meow" id="addCheckPreparingTimeConstraint">
        <sql>
            ALTER TABLE rh.dish ADD CONSTRAINT preparingTimeChecker
            CHECK (CAST(preparingtime AS INT) > 0)
        </sql>
    </changeSet>

    <changeSet author="meow" id="dropCheckPriceConstraintIfExists">
        <sql>
            ALTER TABLE rh.dish DROP CONSTRAINT IF EXISTS priceChecker
        </sql>
    </changeSet>
    <changeSet author="meow" id="addCheckPriceConstraint">
        <sql>
            ALTER TABLE rh.dish ADD CONSTRAINT priceChecker
            CHECK (CAST(price AS DECIMAL) > 0)
        </sql>
    </changeSet>

    <changeSet author="meow" id="dropCheckQuantityConstraintIfExists">
        <sql>
            ALTER TABLE rh.orderdish DROP CONSTRAINT IF EXISTS quantityChecker
        </sql>
    </changeSet>
    <changeSet author="meow" id="addCheckQuantityConstraint">
        <sql>
            ALTER TABLE rh.orderdish ADD CONSTRAINT quantityChecker
            CHECK (CAST(quantity AS INT) > 0)
        </sql>
    </changeSet>
</databaseChangeLog>